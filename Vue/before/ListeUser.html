<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="./assets/css/addUser.css">
    <link href="https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap4.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" charset="utf-8"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap4.min.js"></script>
    <title>Users</title>
</head>

<body>
    <div class="container-fluid">
        <div class="row d-flex d-flex-inline px-0">
            <div class="col-2 menu">
                <div class="row">
                    <div class="col-12 close-btn-side d-flex justify-content-end align-items-center">
                        <span class="close-btn"><i class="bx bx-x"></i></span>
                    </div>
                    <div class="col-12 d-flex justify-content-center logo-container">
                        <img class="img-fluid" src="./assets/images/logo.jpg " alt="">
                    </div>
                    <div class="col-12 d-flex">
                        <div class="menu-container">
                            <div class="menu-title d-flex d-flex-inline">
                                <span class="menuBtn" id="menu-ico"><i class="bx bx-menu"></i></span>
                                <span id="menu-txt">Menu</span>
                            </div>
                            <div class="menu-items mx-auto">
                                <ul>
                                    <li>
                                        <a href="/accueilAdmin">
                                            <div class="menu-item d-flex d-flex-inline">
                                                <span class="menu-item-ico my-auto"><i class="bx bx-home"></i></span>
                                                <span class="menu-item-txt my-auto">Home</span>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="/listeUser">
                                            <div class="menu-item d-flex active d-flex-inline">
                                                <span class="menu-item-ico my-auto"><i class="bx bx-user"></i></span>
                                                <span class="menu-item-txt my-auto">Users</span>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="/listeCours">
                                            <div class="menu-item d-flex d-flex-inline">
                                                <span class="menu-item-ico my-auto"><i class="bx bx-book"></i></span>
                                                <span class="menu-item-txt my-auto">Cours</span>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="">
                                            <div class="menu-item d-flex d-flex-inline">
                                                <span class="menu-item-ico my-auto"><i
                                                        class="bx bx-bookmark"></i></span>
                                                <span class="menu-item-txt my-auto">Points</span>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="">
                                            <div class="menu-item d-flex d-flex-inline">
                                                <span class="menu-item-ico my-auto"><i class="bx bx-chart"></i></span>
                                                <span class="menu-item-txt my-auto">Graduation</span>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-10 content">
                <div class="header row">
                    <div class="header-container col-12">
                        <div class="d-flex justify-content-between header-content">
                            <div class="header-left">
                                <div class="menu-ico-container"><i class="btn-header bx bx-menu"></i></div>
                            </div>
                            <div class="header-right my-auto">
                                <span class="mx-1 text-center user-txt">Andy Solumada</span>
                                <span class=" exit-ico text-center"><i class="bx bx-exit"></i></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row px-2 mx-auto d-block main-content">
                    <div class="col-sm-11 col-md-11 col-lg-11 col-xl-10 col-xxl-10 d-flex all-content">
                        <div class="action-side row d-flex justify-content-between mx-0">
                            <div class="col action-left my-auto">
                                <button class="btn-adduser text-light"><a href="/newemployee">New</a></button>
                            </div>
                            <div class="col action-right my-auto">
                                <nav aria-label="breadcrumb justify-content-end">
                                    <ol class="breadcrumb ol-bread m-auto">
                                        <li class="breadcrumb-item"><a class="bread-ref" href="/accueilAdmin">Home</a>
                                        </li>
                                        <li class="breadcrumb-item active" aria-current="page">Users</li>
                                    </ol>
                                </nav>
                            </div>
                        </div>
                    </div>
                    <div id="notif" class="col-sm-6 notification">
                        
                    </div>
                    <hr>
                    <div class="col-sm-11 col-md-11 col-lg-11 col-xl-10 mt-3 col-xxl-10 table-container">
                        <table id="table_id" class="table table-striped table-hover text-center">
                            <thead>
                                <tr>
                                    <th scope="col">Username</th>
                                    <th scope="col">Code</th>
                                    <th scope="col">Num</th>
                                    <th scope="col">Type</th>
                                    <th scope="col">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% listuser.forEach(function(listuser) { %>
                                    <tr>
                                        <td style="vertical-align: center;">
                                            <%= listuser.username %>
                                        </td>
                                        <td>
                                            <%= listuser.m_code %>
                                        </td>
                                        <td>
                                            <%= listuser.num_agent %>
                                        </td>
                                        <td>
                                            <%= listuser.type_util %>
                                        </td>
                                        <td>
                                            <div class="btn-group mx-auto actionTabBtn" role="group"
                                                aria-label="Basic example">
                                                <button type="button" class="btn btn-sm btn-success"><i
                                                        class="bx bx-detail"></i></button>
                                                <button type="button" id="first" onclick="getdata('/getuser','<%= listuser._id %>')" 
                                                    class="btn btn-sm btn-warning" data-bs-toggle="modal" data-bs-target="#exampleModal" 
                                                    data-bs-whatever="@getbootstrap"><i
                                                        class="bx bx-edit"></i></button>
                                                <button type="button" class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#deleteUser" ><i
                                                    onclick="delete_user('<%= listuser.username %>')" class="bx bx-trash"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <% }); %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Update User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <form>
                      <div class="mb-3">
                        <label for="recipient-name" class="col-form-label">Email:</label>
                        <input type="email" class="form-control" id="username">
                      </div>
                      <div class="mb-3">
                        <label for="recipient-name" class="col-form-label">M-code:</label>
                        <input type="text" class="form-control" id="m_code">
                      </div>
                      <div class="mb-3">
                        <label for="recipient-name" class="col-form-label">Num-agent:</label>
                        <input type="text" class="form-control" id="num_agent">
                      </div>
                      <div class="mb-3">
                        <label for="message-text" class="col-form-label">Utilisateur:</label>
                        <select class="form-control" name="type_util" id="type_util" aria-label="Default select example">
                            <option selected disabled>Select Type</option>
                            <option value="Admin">Admin</option>
                            <option value="Professeur">Teacher</option>
                            <option value="Participant">Participant</option>
                          </select>
                      </div>
                    </form>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" id ="btnu" class="btn btn-primary" onclick="modify()">Update</button>
                  </div>
                </div>
              </div>
            </div>
<!-- Modal -->
            <div class="modal fade" id="deleteUser" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="staticBackdropLabel">DELETE USER</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p id="textwarn"></p>
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-danger" onclick="confirm_del()">Yes, delete it!</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready( function () {
            $('#table_id').DataTable({
                scrollY:        '70vh',
                scrollCollapse: true,
            });

            $('.btn-header').click(
                    function () {
                        $('.menu').addClass('active-mini');
                    }
                );
            $('.close-btn').click(
                function () {
                    $('.menu').removeClass('active-mini');
                }
            );
        });
    </script>
    <script src="./assets/js/table.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="./assets/js/home.js"></script>
    <script src="./assets/js/update-user.js"></script>
    <script src="./assets/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    
</body>

</html>